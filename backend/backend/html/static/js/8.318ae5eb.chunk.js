(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[8],{529:function(e,t,s){"use strict";s.r(t);var a=s(1),r=s.n(a),n=s(512),c=s(515),i=s.n(c),l=s(523);const d=Object(l.extendMoment)(i.a),j=(e,t)=>{const s="YYYY-MM-DD",a=d(e,s);return d(t,s).diff(a,"days")},o=e=>d(e).format("ddd, MMM Do, YYYY"),b=(e,t)=>{const s=d(e),a=d(t);return s.diff(a)};var O=s(28);const h=()=>Object(O.jsx)(n.Q,{children:Object(O.jsx)(n.S,{children:["#","Details",""].map(((e,t)=>Object(O.jsx)(n.R,{scope:"col",children:e},t+e)))})}),p=e=>Object(O.jsx)(n.O,{children:e.sprintData.map(((t,s)=>Object(O.jsxs)(n.S,{children:[Object(O.jsx)(n.R,{scope:"row",children:t.id}),Object(O.jsxs)(n.P,{children:[Object(O.jsx)("strong",{children:"Start:"})," ",o(t.startDate),Object(O.jsx)("br",{}),Object(O.jsx)("strong",{children:"End:"})," ",o(t.endDate),Object(O.jsx)("br",{}),Object(O.jsx)("strong",{children:"Days:"})," ",j(t.startDate,t.endDate)]}),Object(O.jsx)(n.P,{children:Object(O.jsx)(n.d,{color:"primary",variant:"outline",size:"sm",onClick:()=>{e.openSprintModal(t)},children:"Edit"})})]},s+t.startDate)))});var x=e=>Object(O.jsxs)(n.N,{hover:!0,striped:!0,children:[Object(O.jsx)(h,{}),Object(O.jsx)(p,{sprintData:e.sprintData,openSprintModal:e.openSprintModal})]});var u=e=>{const[t,s]=Object(a.useState)(""),[r,c]=Object(a.useState)(""),[i,l]=Object(a.useState)(""),[o,h]=Object(a.useState)(""),[p,x]=Object(a.useState)(-1);Object(a.useEffect)((()=>{const t=e.modalData;if(!t)return;if(-1!==t.editIndex){x(t.editIndex);const e=t.sprintData;s(e.startDate),c(e.endDate)}else x(-1),s(""),c("")}),[e.modalData]);const u=()=>-1!==p,m=t=>e.sprints.some(((e,s)=>s!==p&&((e,t,s)=>{const a=d.range(t,s);return d(e).within(a)})(t,e.startDate,e.endDate))),g=(t,s)=>e.sprints.some(((e,a)=>a!==p&&((e,t,s,a)=>{const r=d.range(e,t),n=d.range(s,a);return r.overlaps(n,{adjacent:!0})})(t,s,e.startDate,e.endDate))),D=e=>{m(e)?h("Date overlaps an existing sprint."):0!==t.length&&b(e,t)<0?h("End date is less than start date."):h("")};return Object(O.jsxs)(n.A,{visible:e.modalOpen,onDismiss:()=>e.setModalOpen(!1),children:[Object(O.jsx)(n.D,{onDismiss:()=>e.setModalOpen(!1),children:Object(O.jsxs)(n.E,{children:[u()?"Edit":"Add"," Sprint"]})}),Object(O.jsx)(n.B,{children:Object(O.jsxs)(n.o,{children:[Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)(n.r,{htmlFor:"startInput",children:"Start Date"}),Object(O.jsx)(n.p,{id:"startInput",value:t,type:"date",onChange:e=>{var t;s(e.target.value),t=e.target.value,m(t)?l("Date overlaps an existing sprint."):g(t,r)?l("This sprint overlaps an existing sprint."):l("")},invalid:0!==i.length,required:!0}),Object(O.jsx)(n.q,{invalid:!0,children:i})]}),Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)(n.r,{htmlFor:"endInput",children:"End Date"}),Object(O.jsx)(n.p,{id:"endInput",value:r,type:"date",onChange:e=>{c(e.target.value),D(e.target.value)},invalid:0!==o.length,required:!0}),Object(O.jsx)(n.q,{invalid:!0,children:o})]}),Object(O.jsxs)("h6",{className:"mt-4 mb-2",children:["Days: ",j(t,r)]}),Object(O.jsxs)("h6",{className:"mb-4",children:["Semester: ",e.semesterCode]}),u()&&Object(O.jsx)(n.d,{color:"danger",variant:"outline",onClick:()=>{window.confirm("Delete Sprint "+(p+1)+"?")&&(e.removeSprint(p),e.setModalOpen(!1))},children:"Delete"})]})}),Object(O.jsxs)(n.C,{children:[Object(O.jsx)(n.d,{color:"secondary",onClick:()=>e.setModalOpen(!1),children:"Close"}),Object(O.jsx)(n.d,{color:"primary",disabled:0!==i.length||0!==o.length,onClick:()=>{e.addSprint(t,r,p)&&e.setModalOpen(!1)},children:"Save"})]})]})};var m=()=>{const[e,t]=Object(a.useState)(""),[s,r]=Object(a.useState)(""),[c,i]=Object(a.useState)([]),[l,d]=Object(a.useState)(!1),[j,o]=Object(a.useState)(null),[h,p]=Object(a.useState)(!1);Object(a.useEffect)((()=>{i([{id:1,semester:"spring2021",startDate:"2021-01-25",endDate:"2021-02-14"},{id:2,semester:"spring2021",startDate:"2021-02-15",endDate:"2021-03-08"},{id:3,semester:"spring2021",startDate:"2021-03-09",endDate:"2021-03-28"}])}),[]);const m=(e=null)=>{const t=e?e.id-1:-1;o({editIndex:t,sprintData:e}),d(!0)};return Object(O.jsxs)(n.g,{className:"mb-4",children:[Object(O.jsx)("h2",{className:"text-center",children:"Class Configuration"}),Object(O.jsx)("hr",{}),Object(O.jsx)("h4",{className:"fw-bold mb-4",children:"Base Requirements"}),Object(O.jsxs)("h5",{className:"mb-4",children:["Semester Code: ",e]}),Object(O.jsxs)("h5",{children:["GitHub Organization: ",s]}),h&&Object(O.jsx)(n.p,{type:"text",placeholder:"ex: csucs314s21",value:s,onChange:e=>r(e.target.value)}),Object(O.jsx)(n.d,{className:"mt-2 mb-2",color:"info",variant:"outline",size:"sm",onClick:()=>{h&&s.length,p(!h)},children:h?s?"Save":"Cancel":"Edit"}),Object(O.jsx)("hr",{}),Object(O.jsx)("h4",{className:"fw-bold mb-3",children:"Sprints"}),Object(O.jsx)(x,{sprintData:c,openSprintModal:m}),Object(O.jsx)("div",{className:"d-grid gap-2",children:Object(O.jsx)(n.d,{color:"dark",size:"sm",onClick:()=>{e&&s?m():alert("Provide a valid semester and organization before configuring sprints.")},children:"Add Sprint"})}),Object(O.jsx)(u,{modalOpen:l,setModalOpen:d,modalData:j,addSprint:(t,s,a)=>{const r=-1!==a,n={id:-1,semester:e,startDate:t,endDate:s},l=[...c];return r?l[a]=n:l.push(n),l.sort(((e,t)=>b(e,t))),l.forEach(((e,t)=>e.id=t+1)),i(l),!0},removeSprint:e=>{if(e<0||e>=c.length)return alert("Failed to remove sprint: invalid index"),!1;const t=[...c];return t.splice(e,1),t.forEach(((e,t)=>e.id=t+1)),i(t),!0},semesterCode:e,sprints:c})]})},g=s(524);const D=(e,t,s)=>{const[a,r,n]=s,c="".concat(a,", ").concat(r,", ").concat(n);return{label:e,backgroundColor:"rgba(".concat(c,", 0.2)"),borderColor:"rgba(".concat(c,", 1)"),borderWidth:2,pointBackgroundColor:"rgba(".concat(c,", 1)"),pointBorderColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(".concat(c,", 1)"),data:t}};var v=({labels:e,studentData:t,classData:s})=>Object(O.jsx)(g.a,{data:{labels:e,datasets:[D("Me",t,[54,162,235]),D("Class",s,[180,182,187])]}});var f=({label:e,value:t})=>Object(O.jsxs)(n.e,{color:"dark",className:"bg-white",children:[Object(O.jsx)("small",{children:e}),Object(O.jsx)("br",{}),Object(O.jsx)("strong",{className:"h5",children:t||"-"})]}),S=s(119);const C=(e,t)=>e.map(((e,s)=>(e/t[s]*100).toFixed(2)));var M=({user:e})=>{const[t,s]=Object(a.useState)([]),c=Object(a.useMemo)((()=>({Commits:"Commits",Pulls:"Pulls",Issues:"Issues",ActiveDays:"Active Days"})),[]),i=Object.keys(c).map((()=>100));return Object(a.useEffect)((()=>{Object(S.c)("StudentActivity","".concat(e.id),{sprintId:1}).then((e=>{if(!e)return;const t=[];let a=[];for(const s of Object.keys(c))t.push(e[s].target),a.push(e[s].score);a=C(a,t),s(a)}))}),[c,e.id]),Object(O.jsxs)(r.a.Fragment,{children:[Object(O.jsx)("h4",{className:"mt-4",children:"Class Perspective"}),Object(O.jsx)(n.H,{className:"mb-4",children:Object(O.jsx)(n.f,{md:{span:10,offset:1},lg:{span:8,offset:2},xl:{span:6,offset:3},children:Object(O.jsx)(v,{labels:Object.values(c),studentData:t,classData:i})})}),Object(O.jsx)("h4",{children:"Your Progress"}),Object(O.jsx)(n.H,{children:Object.keys(c).map(((e,s)=>Object(O.jsx)(n.f,{sm:3,xs:6,children:Object(O.jsx)(f,{label:c[e],value:t[s]})},e)))})]})};t.default=e=>Object(O.jsxs)(n.g,{children:[Object(O.jsx)(M,{user:e.user}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)(m,{})]})}}]);
//# sourceMappingURL=8.318ae5eb.chunk.js.map